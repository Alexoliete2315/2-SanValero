CREATE OR REPLACE PROCEDURE EJERCICIO6 (P_DEPT_NO NUMBER, P_IMPORTE NUMBER, P_PCT NUMBER) AS
    V_INC NUMBER(6,2);
    V_PCT NUMBER(6,2);
BEGIN
    FOR V_REG IN (SELECT EMP_NO, SALARIO FROM EMPLE WHERE DEPT_NO = P_DEPT_NO FOR UPDATE) LOOP
        V_PCT := V_REG.SALARIO * (P_PCT / 100);
        V_INC := GREATEST(V_PCT, P_IMPORTE);
        UPDATE EMPLE SET SALARIO = SALARIO + V_INC WHERE EMP_NO = V_REG.EMP_NO;
    END LOOP;

    COMMIT;
EXCEPTION
    WHEN OTHERS THEN 
        DBMS_OUTPUT.PUT_LINE('ERROR');
END EJERCICIO6;
/
